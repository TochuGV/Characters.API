generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
}

model Character {
  id                String              @id(map: "PK_Character_ID") @default(dbgenerated("newsequentialid()"), map: "DF_Character_ID") @map("ID") @db.UniqueIdentifier
  image             String              @map("Image") @db.VarChar(255)
  name              String              @map("Name") @db.VarChar(100)
  age               Int?                @map("Age")
  weight            Float?              @map("Weight")
  story             String?             @map("Story") @db.VarChar(Max)
  charactersXMovies CharactersXMovies[]
}

model CharactersXMovies {
  id          Int       @id(map: "PK_CharactersXMovies_ID") @default(autoincrement()) @map("ID")
  characterId String    @map("CharacterID") @db.UniqueIdentifier
  movieId     String    @map("MovieID") @db.UniqueIdentifier
  character   Character @relation(fields: [characterId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_CharactersXMovies_CharacterID")
  movie       Movie     @relation(fields: [movieId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_CharactersXMovies_MovieID")
  @@unique([characterId, movieId], map: "UQ_CharactersXMovies_CharacterID_MovieID")
}

model Movie {
  id                String              @id(map: "PK_Movie_ID") @default(dbgenerated("newsequentialid()"), map: "DF_Movie_ID") @map("ID") @db.UniqueIdentifier
  image             String              @map("Image") @db.VarChar(255)
  title             String              @map("Title") @db.VarChar(100)
  creationDate      DateTime            @map("CreationDate") @db.Date
  rating            Int?                @map("Rating")
  charactersXMovies CharactersXMovies[]
}

model User {
  id       String         @id(map: "PK_User_ID") @default(dbgenerated("newsequentialid()"), map: "DF_User_ID") @map("ID") @db.UniqueIdentifier
  email    String         @unique(map: "UQ_User_Email") @map("Email") @db.VarChar(100)
  password String         @map("Password") @db.VarChar(100)
  name     String?        @map("Name") @db.VarChar(100)
  role     String         @default("USER", map: "DF_User_Role") @map("Role") @db.VarChar(5)
  sessions UserSession[]  
}

model UserSession {
  id        String   @id(map: "PK_UserSession_ID") @default(dbgenerated("newsequentialid()"), map: "DF_UserSession_ID") @map("ID") @db.UniqueIdentifier
  userId    String   @map("UserID") @db.UniqueIdentifier
  token     String   @map("Token") @db.VarChar(Max)
  revoked   Boolean  @default(false, map: "DF_UserSession_Revoked") @map("Revoked")
  expiresAt DateTime @map("ExpiresAt")
  createdAt DateTime @default(now(), map: "DF_UserSession_CreatedAt") @map("CreatedAt")
  updatedAt DateTime @updatedAt @map("UpdatedAt")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade, map: "FK_UserSession_User_ID")
}